build_environment: Ubuntu 14.04

language: python

python:
    - "2.7"

before_install:
    - "sudo apt-get -qq -y install libatlas-base-dev gfortran libpng-dev  libfreetype6-dev libxft-dev"
    - "sudo apt-get -qq -y install libhdf5-serial-dev"

install: 
    - "pip install numpy numexpr python-coveralls"
    - "pip install scipy matplotlib"
    - "pip install cython"
    - "git clone https://github.com/PyTables/PyTables.git"
    - "cd PyTables; python setup.py build; python setup.py install"
    - "pip install pandas pyzmq pygments"
    - "pip install -r requirements.txt"
    - "pip install ipython"
    - "pip install -e ."

before_script:
    mkdir -p shippable/testresults
    mkdir -p shippable/codecoverage

script:
    - nosetests --with-xunit --xunit-file=shippable/testresults/nosetests.xml
    - coverage run --source=wzdat --branch setup.py test
    - coverage xml -o shippable/codecoverage/coverage.xml

after_success:
    - coveralls
