language: python

python:
    - "2.7"

before_install:
    - "sudo apt-get -qq -y install libatlas-base-dev gfortran libpng-dev  libfreetype6-dev libxft-dev"
    - "sudo apt-get -qq -y install libhdf5-serial-dev"

install: 
    - "pip install numexpr python-coveralls"
    - "pip install --upgrade cython>=0.13"
    - "pip install --upgrade numpy scipy matplotlib"
    - "pip install tables"
    - "pip install --upgrade pandas pyzmq pygments ipython"
    - "pip install -r requirements.txt"
    - "pip install -e ."

before_script:
    mkdir -p shippable/testresults
    mkdir -p shippable/codecoverage

script:
    - nosetests --with-xunit --xunit-file=shippable/testresults/nosetests.xml
    - coverage run --source=wzdat --branch setup.py test
    - coverage xml -o shippable/codecoverage/coverage.xml

after_success:
    - coveralls
