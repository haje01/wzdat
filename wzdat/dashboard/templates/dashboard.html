{% extends "layout.html" %}

{% block page %}
<div class="container-fluid">
  <div class="row">
    <div class="col-sm-2 col-md-2 sidebar">
      {% for gnb in notebooks %}
      <ul class="nav nav-sidebar">
        {% if gnb[0] != '' %}
        <li class="nb-group">{{gnb[0]}}</li>
        {% endif %}
        {%for nb in gnb[1] %}
        <li><a href="#nb-{{gnb[0]}}-{{loop.index}}" {%if nb[3] is not none %}{% if nb[3][1] is none%}class="nb-running"{%elif nb[3][1] == -1.0 %}class="nb-fail"{%endif%}{%endif%}>{{nb[1]}}</a></li>
        {% endfor %}
      </ul>
      {% endfor %}
    </div>
    <div class="col-sm-10 col-sm-offset-2 col-md-10 col-md-offset-2 main">
      {% for gnb in notebooks %}
      {% for nb in gnb[1] %}
      <div id="nb-{{gnb[0]}}-{{loop.index}}" style="padding-top: 40px; margin-top: -40px">
        <h3 class="nb-title {%if nb[3] is not none%}{% if nb[3][1] is none %}nb-running{% elif nb[3][1] == -1.0 %}nb-fail{%endif%}{% endif %}">
          <span>{{nb[1]}}</span>
          <span class="nb_edit">
            <a href="{{nb[0]}}">code</a>
          </span>
        </h3>
        <div class="pull-right">
          {% if nb[3] is not none %}
          <span class="nb_info">
            {% if nb[3][0] is not none %}
            <span>Cron {{nb[3][0]}} ago</span>{% if nb[3][1] is not none %}<span>, took {{nb[3][1]}}</span>{% else %}<span>, running {{nb[3][2]}}/{{nb[3][3]}} {% endif %}
              {% endif %}
            </span>
            {% endif %}
        </div>
        <div nbpath="{{nb[4]}}">
          {{nb[2]|safe}}
        </div>
      </div>
      {% endfor %}
      {% endfor %}
    </div>
  </div>
</div>
{% endblock %}
